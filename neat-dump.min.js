var d=function(){function a(){this.hasNode=!0,this.hasBrowser=!0,this.hasJasmine=!0,this.beQuiet=!1,this.showSourceLine=!0,this.showStackTrace=!1,this.showTimestamp=!1,this.showErrorLevel=!1,this.showFunctions=!1,this.debugTesting=!1,this.displayFunction=g;try{module.id}catch(a){this.hasNode=!1}try{window.jasmine.Env}catch(a){this.hasJasmine=!1}this.hasBrowser=!this.hasNode,this.hasJasmine||(this.hasBrowser?this.displayFunction=h:this.hasNode&&(this.displayFunction=j,this.showTimestamp=!0,this.showErrorLevel=!0))}function b(a){for(var b=0;b<q.length;b++)if(a===q[b])return!0;return q.push(a),!1}function c(a,d){d=d||0,d||(q=[]);var e,f="";if(a instanceof Array){if(b(a))return"*recursion*";for(f+="[",e=0;e<a.length;e++)"["!==f&&(f+=", "),f+=c(a[e],d+1);f+="]"}else if(a instanceof Function)f=r.config.showFunctions?"function "+a.name+"(){...}":"";else if(a instanceof Object){if(b(a))return"*recursion*";if(a.toString!=={}.toString)f+=a.toString();else{f+="{";var g=Object.getOwnPropertyNames(a).sort();for(e=0;e<g.length;e++)a[g[e]]instanceof Function||("{"!==f&&(f+=", "),f+=g[e]+": ",f+=c(a[g[e]],d+1));f+="}"}}else f+=JSON.stringify(a);return f}function d(a){return a=c(a),a=a.replace(/^"(.*)"$/,"$1"),a=a.replace(/^'(.*)'$/,"$1")}function e(a){for(var b="",c=0;c<a.length;c++)c&&(b+=" "),b+=d(a[c]);return b}function f(a,b,c,d,f){this.level=a,this.channel=b,this.type=c,this.prefix=d,this.args=f,this.text=e(f)}function g(a){var b=a.prefix;null!==a.channel&&(b+=" ["+a.channel+"] "),b+=a.text,console.log(b)}function h(a){var b=a.args;switch(null!==a.channel&&b.unshift("["+a.channel+"]"),""!==a.prefix&&b.unshift(a.prefix.trim()),a.level){case o.DEBUG:console.debug.apply(console,b);break;case o.INFO:console.info.apply(console,b);break;case o.WARNING:console.warn.apply(console,b);break;case o.ERROR:case o.FATAL:console.error.apply(console,b);break;default:console.log.apply(console,b)}}function j(a){var b=a.text,c=a.prefix;switch(c=c.trim(),null!==a.channel&&(c+=" ["+a.channel+"]"),a.level){case o.DEBUG:console.log("[32m",c,b,"[39m");break;case o.INFO:console.log("[37m",c,b,"[39m");break;case o.WARNING:console.log("[35m",c,b,"[39m");break;case o.ERROR:case o.FATAL:console.log("[31m",c,b,"[39m");break;default:console.log(c,b)}}function k(a,b){if(0!==b.length){if(r.config.displayFunction&&!r.config.beQuiet){var c,d,e,g=new Error("Stack trace");if(g.stack){e=g.stack.split("\n"),e.splice(0,3);var h=/\((.*)\)/.exec(e[0]);h?d=h[1]:(h=/^\s+at\s+(.*)/.exec(e[0]),d=h?h[1]:e[0].trim())}else d="unknown";var i=null;if(Object.keys(p).length>0)if(b[0]in p){if(!p[b[0]])return b[b.length-1];i=b[0],b=b.splice(1)}else if(i="GENERAL",i in p&&!p[i])return b[b.length-1];var j="";if(r.config.showTimestamp&&(j+=(new Date).toJSON().substr(11,8)+" "),r.config.showErrorLevel&&(j+=a+": "),r.config.showStackTrace){c=new f(a,i,"stack",j,["________________________________________________________________________________________"]),r.config.displayFunction(c);for(var k=0;k<e.length;k++)c=new f(a,i,"stack",j,[e[k]]),r.config.displayFunction(c)}else r.config.showSourceLine&&(c=new f(a,i,"line",j,["==",d,"=="]),r.config.displayFunction(c));c=new f(a,i,"message",j,b),r.config.displayFunction(c)}return b[b.length-1]}}function l(a){this.message=a}function m(a){this.message=a,this.stack=(new Error).stack}function n(a){function b(a,d){function e(a,b,e){try{jasmine&&expect(!0).toBe(!0)}catch(f){}if(b+=" (had "+c(e)+")",!a&&!d)throw new m("Dump Expectation Failed: expected to "+b);if(a&&d)throw new m("Dump Expectation Failed: expected not to "+b)}function f(b){var c=[];for(i=0;i<a.length;i++)if("message"===a[i].type){if(b&&!b(a[i]))continue;c.push(a[i].text)}return c}d||(this.not=new b(a,!0)),this.toHaveMessages=function(){e(a.length>0,"have some messages",a.length)},this.toBe=function(){var a=Array.prototype.slice.call(arguments),b=f(function(a){return null===a.channel||"GENERAL"===a.channel}),c=!1;if(a.length==b.length){c=!0;for(var d=0;d<a.length;d++)if(a[d]!==b[d]){c=!1;break}}e(c,"have exactly "+a.length+" messages ['"+a.join("', '")+"']",b)}}function d(a){e.push(a),r.config.debugTesting&&f(a)}var e=[],f=r.config.displayFunction;r.config.displayFunction=d;try{a()}catch(g){if(!(g instanceof l))throw r.config.displayFunction=f,g}return r.config.displayFunction=f,new b(e)}var o={DEBUG:"DEBUG",INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",FATAL:"FATAL"},p={},q=[];l.prototype=Object.create(Error.prototype),l.prototype.name="DumpError",l.prototype.constructor=l,m.prototype=Object.create(Error.prototype),m.prototype.name="DumpExceptionError",m.prototype.constructor=m;var r=function(){var a=Array.prototype.slice.call(arguments);return k(o.DEBUG,a)};return r.config=new a,r.info=function(){var a=Array.prototype.slice.call(arguments);return k(o.INFO,a)},r.warning=function(){var a=Array.prototype.slice.call(arguments);return k(o.WARNING,a)},r.error=function(){var a=Array.prototype.slice.call(arguments);return k(o.ERROR,a)},r.fatal=function(){var a=Array.prototype.slice.call(arguments);throw k(o.FATAL,a),new l("FATAL: "+e(a))},r.channels=function(a){for(var b in a)b in p?null!==a[b]&&(p[b]=a[b]):p[b]=a[b]},r.expect=function(a){return n(a)},r}();d.config.hasNode&&(module.exports=d);